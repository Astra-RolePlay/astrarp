import{importShared as Ke,__tla as Qe}from"./__federation_fn_import-muhVlgpn.js";let _e,k,je,Se,Me,ee,te,et=Promise.all([(()=>{try{return Qe}catch{}})()]).then(async()=>{var b={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ae={env:{}};const{createContext:Pe,useState:re,useEffect:C,useRef:Re,createElement:ze,useDebugValue:ne,useContext:oe,useCallback:I,useReducer:ke}=await Ke("react"),S=Symbol(),ie=o=>!!o[S],Ce=o=>!o[S].c,T=o=>{var i,s;(s=(i=o[S]).c)==null||s.call(i)},x=(o,i)=>{const s=o[S].o,l=i[S].o;return s===l||o===l||ie(s)&&x(s,i)},ce=o=>{const i={o,c:null},s=new Promise(l=>{i.c=()=>{i.c=null,l()},o.then(i.c,i.c)});return s[S]=i,s};var Te=Object.defineProperty,xe=Object.defineProperties,De=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,ae=(o,i,s)=>i in o?Te(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s,Ie=(o,i)=>{for(var s in i||(i={}))Ne.call(i,s)&&ae(o,s,i[s]);if(se)for(var s of se(i))We.call(i,s)&&ae(o,s,i[s]);return o},Le=(o,i)=>xe(o,De(i));let A,M,P,R,z,L,V,B,F,G,U,$,D;A=o=>"init"in o,M="r",P="w",R="c",z="s",L="h",V="n",B="l",F="a",G="m",U=o=>{const i=new WeakMap,s=new WeakMap,l=new Map;let d,p;if((b&&"production")!=="production"&&(d=new Set,p=new Set),o)for(const[e,t]of o){const c={v:t,r:0,d:new Map};(b&&"production")!=="production"&&(Object.freeze(c),A(e)||console.warn("Found initial value for derived atom which can cause unexpected behavior",e)),i.set(e,c)}const v=new WeakMap,f=(e,t,c)=>{let r=v.get(t);r||(r=new Map,v.set(t,r)),c.then(()=>{r.get(e)===c&&(r.delete(e),r.size||v.delete(t))}),r.set(e,c)},O=e=>{const t=new Set,c=v.get(e);return c&&(v.delete(e),c.forEach((r,a)=>{T(r),t.add(a)})),t},g=new WeakMap,m=e=>{let t=g.get(e);return t||(t=new Map,g.set(e,t)),t},h=(e,t)=>{if(e){const c=m(e);let r=c.get(t);return r||(r=h(e.p,t),r&&("p"in r&&r.p.then(()=>c.delete(t)),c.set(t,r))),r}return i.get(t)},N=(e,t,c)=>{if((b&&"production")!=="production"&&Object.freeze(c),e)m(e).set(t,c);else{const r=i.get(t);i.set(t,c),l.has(t)||l.set(t,r)}},J=(e,t=new Map,c)=>{if(!c)return t;const r=new Map;let a=!1;return c.forEach(n=>{var u;const w=((u=h(e,n))==null?void 0:u.r)||0;r.set(n,w),t.get(n)!==w&&(a=!0)}),t.size===r.size&&!a?t:r},fe=(e,t,c,r,a)=>{const n=h(e,t);if(n){if(a&&(!("p"in n)||!x(n.p,a)))return n;"p"in n&&T(n.p)}const u={v:c,r:(n==null?void 0:n.r)||0,d:J(e,n==null?void 0:n.d,r)};return!n||!("v"in n)||!Object.is(n.v,c)?(++u.r,u.d.has(t)&&(u.d=new Map(u.d).set(t,u.r))):u.d!==n.d&&(u.d.size!==n.d.size||!Array.from(u.d.keys()).every(w=>n.d.has(w)))&&Promise.resolve().then(()=>{j(e)}),N(e,t,u),u},we=(e,t,c,r,a)=>{const n=h(e,t);if(n){if(a&&(!("p"in n)||!x(n.p,a)))return n;"p"in n&&T(n.p)}const u={e:c,r:(n==null?void 0:n.r)||0,d:J(e,n==null?void 0:n.d,r)};return N(e,t,u),u},ve=(e,t,c,r)=>{const a=h(e,t);if(a&&"p"in a){if(x(a.p,c))return a;T(a.p)}f(e,t,c);const n={p:c,r:(a==null?void 0:a.r)||0,d:J(e,a==null?void 0:a.d,r)};return N(e,t,n),n},W=(e,t,c,r)=>{if(c instanceof Promise){const a=ce(c.then(n=>{fe(e,t,n,r,a),j(e)}).catch(n=>{if(n instanceof Promise)return ie(n)?n.then(()=>{_(e,t,!0)}):n;we(e,t,n,r,a),j(e)}));return ve(e,t,a,r)}return fe(e,t,c,r)},He=(e,t)=>{const c=h(e,t);if(c){const r=Le(Ie({},c),{i:c.r});N(e,t,r)}else(b&&"production")!=="production"&&console.warn("[Bug] could not invalidate non existing atom",t)},_=(e,t,c)=>{if(!c){const a=h(e,t);if(a&&(a.r!==a.i&&"p"in a&&!Ce(a.p)||(a.d.forEach((n,u)=>{if(u!==t)if(!s.has(u))_(e,u);else{const w=h(e,u);w&&w.r===w.i&&_(e,u)}}),Array.from(a.d).every(([n,u])=>{const w=h(e,n);return w&&"v"in w&&w.r===u}))))return a}const r=new Set;try{const a=t.read(n=>{r.add(n);const u=n===t?h(e,n):_(e,n);if(u){if("e"in u)throw u.e;if("p"in u)throw u.p;return u.v}if(A(n))return n.init;throw new Error("no atom init")});return W(e,t,a,r)}catch(a){if(a instanceof Promise){const n=ce(a);return ve(e,t,n,r)}return we(e,t,a,r)}},he=(e,t)=>_(t,e),Je=e=>{let t=s.get(e);return t||(t=K(e)),t},X=(e,t)=>!t.l.size&&(!t.t.size||t.t.size===1&&t.t.has(e)),Xe=e=>{const t=s.get(e);t&&X(e,t)&&Q(e)},Y=(e,t)=>{const c=s.get(t);c==null||c.t.forEach(r=>{r!==t&&(He(e,r),Y(e,r))})},me=(e,t,c)=>{let r=!0;const a=(w,y)=>{const E=_(e,w);if("e"in E)throw E.e;if("p"in E){if(y!=null&&y.unstable_promise)return E.p.then(()=>a(w,y));throw(b&&"production")!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",w),E.p}if("v"in E)return E.v;throw(b&&"production")!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",w),new Error("no value found")},n=(w,y)=>{let E;if(w===t){if(!A(w))throw new Error("atom not writable");O(w).forEach(Oe=>{Oe!==e&&W(Oe,w,y)}),W(e,w,y),Y(e,w)}else E=me(e,w,y);return r||j(e),E},u=t.write(a,n,c);return r=!1,e=void 0,u},Z=(e,t,c)=>{const r=me(c,e,t);return j(c),r},Ye=e=>!!e.write,K=(e,t)=>{const c={t:new Set(t&&[t]),l:new Set};if(s.set(e,c),(b&&"production")!=="production"&&p.add(e),_(void 0,e).d.forEach((r,a)=>{const n=s.get(a);n?n.t.add(e):a!==e&&K(a,e)}),Ye(e)&&e.onMount){const r=n=>Z(e,n),a=e.onMount(r);a&&(c.u=a)}return c},Q=e=>{var t;const c=(t=s.get(e))==null?void 0:t.u;c&&c(),s.delete(e),(b&&"production")!=="production"&&p.delete(e);const r=h(void 0,e);r?r.d.forEach((a,n)=>{if(n!==e){const u=s.get(n);u&&(u.t.delete(e),X(n,u)&&Q(n))}}):(b&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",e)},be=(e,t,c)=>{const r=new Set(t.d.keys());c==null||c.forEach((a,n)=>{if(r.has(n)){r.delete(n);return}const u=s.get(n);u&&(u.t.delete(e),X(n,u)&&Q(n))}),r.forEach(a=>{const n=s.get(a);n?n.t.add(e):s.has(e)&&K(a,e)})},j=e=>{if(e){m(e).forEach((t,c)=>{if(t!==i.get(c)){const r=s.get(c);r==null||r.l.forEach(a=>a(e))}});return}for(;l.size;){const t=Array.from(l);l.clear(),t.forEach(([c,r])=>{const a=h(void 0,c);a&&a.d!==(r==null?void 0:r.d)&&be(c,a,r==null?void 0:r.d);const n=s.get(c);n==null||n.l.forEach(u=>u())})}(b&&"production")!=="production"&&d.forEach(t=>t())},Ze=e=>{m(e).forEach((t,c)=>{const r=i.get(c);(t.r>((r==null?void 0:r.r)||0)||"v"in t&&t.r===(r==null?void 0:r.r)&&t.d!==(r==null?void 0:r.d))&&(i.set(c,t),t.d!==(r==null?void 0:r.d)&&be(c,t,r==null?void 0:r.d))})},ge=(e,t)=>{t&&Ze(t),j(void 0)},Ee=(e,t)=>{const c=Je(e).l;return c.add(t),()=>{c.delete(t),Xe(e)}},ye=(e,t)=>{for(const[c,r]of e)A(c)&&(W(t,c,r),Y(t,c));j(t)};return(b&&"production")!=="production"?{[M]:he,[P]:Z,[R]:ge,[z]:Ee,[L]:ye,[V]:e=>(d.add(e),()=>{d.delete(e)}),[B]:()=>p.values(),[F]:e=>i.get(e),[G]:e=>s.get(e)}:{[M]:he,[P]:Z,[R]:ge,[z]:Ee,[L]:ye}},Se=o=>{const i=U(o),s=d=>{const p=i[M](d);if("e"in p)throw p.e;if(!("p"in p))return p.v},l=d=>new Promise((p,v)=>{const f=i[M](d);"e"in f?v(f.e):"p"in f?p(f.p.then(()=>l(d))):p(f.v)});return{get:s,asyncGet:l,set:(d,p)=>i[P](d,p),sub:(d,p)=>i[z](d,p),SECRET_INTERNAL_store:i}},$=(o,i)=>({s:i?i(o).SECRET_INTERNAL_store:U(o)}),D=new Map,k=o=>(D.has(o)||D.set(o,Pe($())),D.get(o));var Ve=Object.defineProperty,Be=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,le=(o,i,s)=>i in o?Ve(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s,q=(o,i)=>{for(var s in i||(i={}))Ge.call(i,s)&&le(o,s,i[s]);if(ue)for(var s of ue(i))Ue.call(i,s)&&le(o,s,i[s]);return o},$e=(o,i)=>Be(o,Fe(i));let H,de,pe;_e=({children:o,initialValues:i,scope:s,unstable_createStore:l,unstable_enableVersionedWrite:d})=>{const[p,v]=re();C(()=>{p&&(f.current.s[R](null,p),delete p.p)},[p]);const f=Re();f.current||(f.current=$(i,l),d&&(f.current.w=g=>{v(m=>{const h=m?{p:m}:{};return g(h),h})})),(b&&"production")!=="production"&&(typeof Ae!="object"||!0)&&pe(f.current);const O=k(s);return ze(O.Provider,{value:f.current},o)},H=o=>o.debugLabel||o.toString(),de=([o,i])=>Object.fromEntries(i.flatMap(s=>{var l,d;const p=(l=o[G])==null?void 0:l.call(o,s);if(!p)return[];const v=p.t,f=((d=o[F])==null?void 0:d.call(o,s))||{};return[[H(s),$e(q(q(q({},"e"in f&&{error:f.e}),"p"in f&&{promise:f.p}),"v"in f&&{value:f.v}),{dependents:Array.from(v).map(H)})]]})),pe=o=>{const{s:i}=o,[s,l]=re([]);C(()=>{var d;const p=()=>{var f;l(Array.from(((f=i[B])==null?void 0:f.call(i))||[]))},v=(d=i[V])==null?void 0:d.call(i,p);return p(),v},[i]),ne([i,s],de)};let qe=0;je=function(o,i){const s=`atom${++qe}`,l={toString:()=>s};return typeof o=="function"?l.read=o:(l.init=o,l.read=d=>d(l),l.write=(d,p,v)=>p(l,typeof v=="function"?v(d(l)):v)),i&&(l.write=i),l},ee=function(o,i){const s=k(i),{s:l}=oe(s),d=I(g=>{const m=l[M](o,g);if("e"in m)throw m.e;if("p"in m)throw m.p;if("v"in m)return m.v;throw new Error("no atom value")},[l,o]),[[p,v,f],O]=ke(I((g,m)=>{const h=d(m);return Object.is(g[1],h)&&g[2]===o?g:[m,h,o]},[d,o]),void 0,()=>[void 0,d(void 0),o]);return f!==o&&O(void 0),C(()=>{const g=l[z](o,O);return O(void 0),g},[l,o]),C(()=>{l[R](o,p)}),ne(v),v},te=function(o,i){const s=k(i),{s:l,w:d}=oe(s);return I(p=>{"write"in o;const v=f=>l[P](o,p,f);return d?d(v):v()},[l,d,o])},Me=function(o,i){return"scope"in o&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),i=o.scope),[ee(o,i),te(o,i)]}});export{_e as Provider,k as SECRET_INTERNAL_getScopeContext,et as __tla,je as atom,Se as unstable_createStore,Me as useAtom,ee as useAtomValue,te as useSetAtom};
